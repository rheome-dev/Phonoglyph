(()=>{var e={};e.id=677,e.ids=[677],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},360:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>o,routeModule:()=>m,tree:()=>d}),t(5652),t(8532),t(146);var a=t(4053),r=t(1919),l=t(9335),i=t.n(l),n=t(4173),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["audio-analysis-sandbox",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5652)),"/Users/jasperhall/Desktop/Phonoglyph/apps/web/src/app/audio-analysis-sandbox/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8532)),"/Users/jasperhall/Desktop/Phonoglyph/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,146,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/jasperhall/Desktop/Phonoglyph/apps/web/src/app/audio-analysis-sandbox/page.tsx"],h="/audio-analysis-sandbox/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/audio-analysis-sandbox/page",pathname:"/audio-analysis-sandbox",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8737:(e,s,t)=>{Promise.resolve().then(t.bind(t,779))},779:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>W});var a=t(3972),r=t(3250),l=t(4482),i=t(8868),n=t(883),c=t(4330),d=t(4785);let o=(0,d.Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),h=(0,d.Z)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);var x=t(1730),m=t(4045),u=t(4001),f=t(6929);function p({audioBuffer:e,params:s,onAnalysisComplete:t}){let a=(0,r.useCallback)((e,t)=>{let a=[],r=[];for(let l=0;l<e.length-1024;l+=512){let i=(function(e){let s=e.length,t=[];for(let a=0;a<s;a++){let r=0,l=0;for(let t=0;t<s;t++){let i=-2*Math.PI*a*t/s;r+=e[t]*Math.cos(i),l+=e[t]*Math.sin(i)}t.push({real:r,imag:l})}return t})(e.slice(l,l+1024).map((e,s)=>e*(.5-.5*Math.cos(2*Math.PI*s/1023)))).map(e=>Math.sqrt(e.real*e.real+e.imag*e.imag));if(r.length>0){let e=0;for(let s=0;s<i.length;s++){let t=i[s]-r[r.length-1][s];t>0&&(e+=t)}if(e>s.transientThreshold){let s=l/t,r=Math.min(e/10,1),n=0,c=0;for(let e=1;e<i.length/2;e++)i[e]>n&&(n=i[e],c=e*t/1024);a.push({time:s,intensity:r,frequency:c})}}r.push(i)}return a},[s.transientThreshold]),l=(0,r.useCallback)((e,t)=>{let a=[],r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];for(let l=0;l<e.length-2048;l+=512){let i=function(e,s){let t=Math.floor(s/2e3),a=Math.floor(s/80),r=0,l=1;for(let s=t;s<a&&s<e.length/2;s++){let t=0,a=0;for(let r=0;r<e.length-s;r++){let l=e[r]-e[r+s];t+=l*l,a+=e[r]*e[r]}a>0&&(t/=a)<l&&(l=t,r=s)}return r>0?s/r:0}(e.slice(l,l+2048).map((e,s)=>e*(.5-.5*Math.cos(2*Math.PI*s/2047))),t);if(i>0&&i<2e3){let e=Math.round(12*Math.log2(i/440)+69)%12,n=Math.min(i/1e3,1);n>s.pitchConfidence&&a.push({time:l/t,pitch:e,confidence:n,note:r[e]})}}return function(e,s){if(0===e.length)return e;let t=[...e],a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];for(let e=1;e<t.length-1;e++){let r=t[e-1],l=t[e],i=t[e+1],n=Math.round((r.pitch+l.pitch+i.pitch)/3),c=(r.confidence+l.confidence+i.confidence)/3;c>l.confidence*s&&(t[e]={time:l.time,pitch:n,confidence:c,note:a[n]})}return t}(a,s.chromaSmoothing)},[s.pitchConfidence,s.chromaSmoothing]),i=(0,r.useCallback)((e,t)=>{let a=s.rmsWindowSize,r=a/2,l=[];for(let s=0;s<e.length-a;s+=r){let r=e.slice(s,s+a),i=0;for(let e=0;e<r.length;e++)i+=r[e]*r[e];let n=Math.sqrt(i/r.length);l.push({time:s/t,value:n})}return l},[s.rmsWindowSize]),n=(0,r.useCallback)((e,s=1e3)=>{let t=Math.floor(e.length/s),a=[];for(let r=0;r<s;r++){let s=r*t,l=Math.min(s+t,e.length),i=0;for(let t=s;t<l;t++)i+=e[t]*e[t];let n=Math.sqrt(i/(l-s));a.push(n)}return a},[]);return(0,r.useCallback)(async()=>{let r=e.getChannelData(0),c=e.sampleRate,d=a(r,c);t({transients:d,chroma:l(r,c),rms:i(r,c),waveform:n(r),metadata:{sampleRate:c,duration:e.duration,bufferSize:e.length,analysisParams:s}})},[e,s,a,l,i,n,t]),null}var g=t(2356);let b=["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#10b981","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#d946ef"],j=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function v({analysisData:e,currentTime:s,duration:t,onSeek:d,isPlaying:x}){let m=(0,r.useRef)(null),u=(0,r.useRef)(null),f=(0,r.useRef)(null),[p,v]=(0,r.useState)("all");(0,r.useCallback)(()=>{let a=m.current;if(!a||!e.waveform)return;let r=a.getContext("2d");if(!r)return;let l=a.getBoundingClientRect();a.width=l.width*devicePixelRatio,a.height=l.height*devicePixelRatio,r.scale(devicePixelRatio,devicePixelRatio);let i=l.width,n=l.height,c=n/2;r.clearRect(0,0,i,n),r.beginPath(),r.strokeStyle="#ffffff",r.lineWidth=1;let d=e.waveform;for(let e=0;e<d.length;e++){let s=e/(d.length-1)*i,t=c-d[e]*c*.8;0===e?r.moveTo(s,t):r.lineTo(s,t)}r.stroke(),e.transients&&e.transients.forEach(e=>{let s=e.time/t*i,a=e.intensity,l=a*n*.6;r.beginPath(),r.strokeStyle="#ef4444",r.lineWidth=2,r.moveTo(s,c-l/2),r.lineTo(s,c+l/2),r.stroke(),r.beginPath(),r.fillStyle=`rgba(239, 68, 68, ${a})`,r.arc(s,c,4,0,2*Math.PI),r.fill()});let o=s/t*i;r.beginPath(),r.strokeStyle="#fbbf24",r.lineWidth=2,r.moveTo(o,0),r.lineTo(o,n),r.stroke()},[e,s,t]),(0,r.useCallback)(()=>{let a=u.current;if(!a||!e.chroma)return;let r=a.getContext("2d");if(!r)return;let l=a.getBoundingClientRect();a.width=l.width*devicePixelRatio,a.height=l.height*devicePixelRatio,r.scale(devicePixelRatio,devicePixelRatio);let i=l.width,n=l.height,c=n/12;r.clearRect(0,0,i,n),e.chroma.forEach(e=>{let s=e.time/t*i,a=(11-e.pitch)*c,l=e.confidence;r.fillStyle=`${b[e.pitch]}${Math.floor(255*l).toString(16).padStart(2,"0")}`,r.fillRect(s-2,a,4,c)}),r.fillStyle="#ffffff",r.font="12px monospace",r.textAlign="right";for(let e=0;e<12;e++){let s=(11-e)*c+c/2+4;r.fillText(j[e],30,s)}let d=s/t*i;r.beginPath(),r.strokeStyle="#fbbf24",r.lineWidth=2,r.moveTo(d,0),r.lineTo(d,n),r.stroke()},[e,s,t]),(0,r.useCallback)(()=>{let a=f.current;if(!a||!e.rms)return;let r=a.getContext("2d");if(!r)return;let l=a.getBoundingClientRect();a.width=l.width*devicePixelRatio,a.height=l.height*devicePixelRatio,r.scale(devicePixelRatio,devicePixelRatio);let i=l.width,n=l.height;r.clearRect(0,0,i,n),r.beginPath(),r.strokeStyle="#10b981",r.lineWidth=2,e.rms.forEach((e,s)=>{let a=e.time/t*i,l=n-e.value*n;0===s?r.moveTo(a,l):r.lineTo(a,l)}),r.stroke(),r.beginPath(),r.strokeStyle="#10b981",r.lineWidth=2,e.rms.forEach((e,s)=>{let a=e.time/t*i,l=n-e.value*n;0===s&&r.moveTo(a,n),r.lineTo(a,l)}),r.lineTo(i,n),r.closePath(),r.fillStyle="rgba(16, 185, 129, 0.2)",r.fill();let c=s/t*i;r.beginPath(),r.strokeStyle="#fbbf24",r.lineWidth=2,r.moveTo(c,0),r.lineTo(c,n),r.stroke()},[e,s,t]);let N=(0,r.useCallback)(e=>{let s=e.currentTarget.getBoundingClientRect();d((e.clientX-s.left)/s.width*t)},[t,d]);return(0,a.jsxs)(l.Zb,{className:"bg-slate-800/50 border-slate-700",children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"text-white flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o,{className:"w-5 h-5"}),"Analysis Visualization"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(i.z,{variant:"all"===p?"default":"outline",size:"sm",onClick:()=>v("all"),className:"text-xs",children:"All"}),a.jsx(i.z,{variant:"waveform"===p?"default":"outline",size:"sm",onClick:()=>v("waveform"),className:"text-xs",children:"Waveform"}),a.jsx(i.z,{variant:"chroma"===p?"default":"outline",size:"sm",onClick:()=>v("chroma"),className:"text-xs",children:"Chroma"}),a.jsx(i.z,{variant:"rms"===p?"default":"outline",size:"sm",onClick:()=>v("rms"),className:"text-xs",children:"RMS"})]})]})}),(0,a.jsxs)(l.aY,{className:"space-y-6",children:[("waveform"===p||"all"===p)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(g.Z,{className:"w-4 h-4 text-red-400"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Waveform with Transients"}),(0,a.jsxs)(n.C,{variant:"outline",className:"text-slate-300 border-slate-600",children:[e.transients?.length||0," transients"]})]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("canvas",{ref:m,onClick:N,className:"w-full h-32 bg-slate-900/50 rounded-lg cursor-pointer"}),a.jsx("div",{className:"absolute top-2 left-2 text-xs text-slate-400",children:"Click to seek â€¢ Red markers = transients"})]})]}),("chroma"===p||"all"===p)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-4 h-4 text-blue-400"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Chroma Analysis"}),(0,a.jsxs)(n.C,{variant:"outline",className:"text-slate-300 border-slate-600",children:[new Set(e.chroma?.map(e=>e.note)||[]).size," unique notes"]})]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("canvas",{ref:u,onClick:N,className:"w-full h-48 bg-slate-900/50 rounded-lg cursor-pointer"}),a.jsx("div",{className:"absolute top-2 left-2 text-xs text-slate-400",children:"Click to seek â€¢ Colors = chroma classes"})]})]}),("rms"===p||"all"===p)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h,{className:"w-4 h-4 text-green-400"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"RMS Analysis"}),(0,a.jsxs)(n.C,{variant:"outline",className:"text-slate-300 border-slate-600",children:["Avg: ",e.rms?.length?(e.rms.reduce((e,s)=>e+s.value,0)/e.rms.length).toFixed(3):"0.000"]})]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("canvas",{ref:f,onClick:N,className:"w-full h-32 bg-slate-900/50 rounded-lg cursor-pointer"}),a.jsx("div",{className:"absolute top-2 left-2 text-xs text-slate-400",children:"Click to seek â€¢ Green area = RMS amplitude"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-slate-600",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[a.jsx(g.Z,{className:"w-4 h-4 text-red-400"}),"Transients"]}),(0,a.jsxs)("div",{className:"space-y-1 text-xs text-slate-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),a.jsx("span",{children:"Onset detection"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500/50 rounded-full"}),a.jsx("span",{children:"Intensity = opacity"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-4 h-4 text-blue-400"}),"Chroma"]}),(0,a.jsxs)("div",{className:"space-y-1 text-xs text-slate-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),a.jsx("span",{children:"C"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),a.jsx("span",{children:"G"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),a.jsx("span",{children:"E"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[a.jsx(h,{className:"w-4 h-4 text-green-400"}),"RMS"]}),(0,a.jsxs)("div",{className:"space-y-1 text-xs text-slate-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),a.jsx("span",{children:"Amplitude curve"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500/20 rounded"}),a.jsx("span",{children:"Filled area"})]})]})]})]})]})]})}var N=t(8673),y=t(2204),w=t(4400),C=t(9248);function S({params:e,onParamsChange:s}){let t=(t,a)=>{s({...e,[t]:Array.isArray(a)?a[0]:a})};return(0,a.jsxs)(l.Zb,{className:"bg-slate-800/50 border-slate-700",children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"text-white flex items-center gap-2",children:[a.jsx(C.Z,{className:"w-5 h-5"}),"Analysis Parameters"]})}),(0,a.jsxs)(l.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(g.Z,{className:"w-4 h-4 text-red-400"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Transient Detection"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{className:"text-slate-300",children:["Transient Threshold: ",e.transientThreshold.toFixed(2)]}),a.jsx(N.i,{value:[e.transientThreshold],onValueChange:e=>t("transientThreshold",e),min:.1,max:.9,step:.05,className:"mt-2"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Higher values detect fewer, stronger transients"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{className:"text-slate-300",children:["Onset Threshold: ",e.onsetThreshold.toFixed(2)]}),a.jsx(N.i,{value:[e.onsetThreshold],onValueChange:e=>t("onsetThreshold",e),min:.05,max:.5,step:.025,className:"mt-2"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Sensitivity for detecting note onsets"})]})]})]}),a.jsx(w.Z,{className:"bg-slate-600"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(c.Z,{className:"w-4 h-4 text-blue-400"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Chroma & Pitch Detection"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{className:"text-slate-300",children:["Chroma Smoothing: ",e.chromaSmoothing.toFixed(2)]}),a.jsx(N.i,{value:[e.chromaSmoothing],onValueChange:e=>t("chromaSmoothing",e),min:.1,max:.95,step:.05,className:"mt-2"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Higher values create smoother pitch transitions"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{className:"text-slate-300",children:["Pitch Confidence: ",e.pitchConfidence.toFixed(2)]}),a.jsx(N.i,{value:[e.pitchConfidence],onValueChange:e=>t("pitchConfidence",e),min:.3,max:.95,step:.05,className:"mt-2"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Minimum confidence for pitch detection"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{className:"text-slate-300",children:["Min Note Duration: ",e.minNoteDuration.toFixed(2),"s"]}),a.jsx(N.i,{value:[e.minNoteDuration],onValueChange:e=>t("minNoteDuration",e),min:.05,max:.5,step:.025,className:"mt-2"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Minimum duration for valid notes"})]})]})]}),a.jsx(w.Z,{className:"bg-slate-600"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(h,{className:"w-4 h-4 text-green-400"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"RMS Analysis"})]}),a.jsx("div",{className:"space-y-3",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{className:"text-slate-300",children:["Window Size: ",e.rmsWindowSize]}),a.jsx(N.i,{value:[e.rmsWindowSize],onValueChange:e=>t("rmsWindowSize",e),min:256,max:4096,step:128,className:"mt-2"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Larger windows = smoother RMS values"})]})})]}),(0,a.jsxs)("div",{className:"pt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-3",children:"Quick Presets"}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[a.jsx("button",{onClick:()=>s({transientThreshold:.2,onsetThreshold:.15,chromaSmoothing:.7,rmsWindowSize:512,pitchConfidence:.6,minNoteDuration:.08}),className:"px-3 py-1 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors",children:"Sensitive"}),a.jsx("button",{onClick:()=>s({transientThreshold:.4,onsetThreshold:.25,chromaSmoothing:.8,rmsWindowSize:1024,pitchConfidence:.75,minNoteDuration:.12}),className:"px-3 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Balanced"}),a.jsx("button",{onClick:()=>s({transientThreshold:.6,onsetThreshold:.35,chromaSmoothing:.9,rmsWindowSize:2048,pitchConfidence:.85,minNoteDuration:.2}),className:"px-3 py-1 text-xs bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:"Conservative"})]})]})]})]})}let k=(0,d.Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),A=(0,d.Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var T=t(8471);function P({comparison:e,onSaveToCache:s,onLoadFromCache:t,isSaving:r=!1,isLoading:c=!1}){let d=e=>e>0?a.jsx(k,{className:"w-4 h-4 text-green-400"}):e<0?a.jsx(A,{className:"w-4 h-4 text-red-400"}):a.jsx(T.Z,{className:"w-4 h-4 text-slate-400"}),h=e=>e>0?"bg-green-600/20 text-green-400 border-green-600":e<0?"bg-red-600/20 text-red-400 border-red-600":"bg-slate-600/20 text-slate-400 border-slate-600";return(0,a.jsxs)(l.Zb,{className:"bg-slate-800/50 border-slate-700",children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"text-white flex items-center gap-2",children:[a.jsx(o,{className:"w-5 h-5"}),"Analysis Comparison"]})}),(0,a.jsxs)(l.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Transients"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-300",children:"Sandbox"}),a.jsx(n.C,{variant:"outline",className:"text-blue-400 border-blue-600",children:e.transients.sandbox})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-300",children:"Cached"}),a.jsx(n.C,{variant:"outline",className:"text-slate-400 border-slate-600",children:e.transients.cached})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-300",children:"Difference"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[d(e.transients.difference),(0,a.jsxs)(n.C,{variant:"outline",className:h(e.transients.difference),children:[e.transients.difference>0?"+":"",e.transients.difference]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Chroma"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-300",children:"Sandbox"}),a.jsx(n.C,{variant:"outline",className:"text-blue-400 border-blue-600",children:e.chroma.sandbox})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-300",children:"Cached"}),a.jsx(n.C,{variant:"outline",className:"text-slate-400 border-slate-600",children:e.chroma.cached})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-300",children:"Difference"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[d(e.chroma.difference),(0,a.jsxs)(n.C,{variant:"outline",className:h(e.chroma.difference),children:[e.chroma.difference>0?"+":"",e.chroma.difference]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"RMS"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-300",children:"Sandbox"}),a.jsx(n.C,{variant:"outline",className:"text-blue-400 border-blue-600",children:e.rms.sandbox})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-300",children:"Cached"}),a.jsx(n.C,{variant:"outline",className:"text-slate-400 border-slate-600",children:e.rms.cached})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-300",children:"Difference"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[d(e.rms.difference),(0,a.jsxs)(n.C,{variant:"outline",className:h(e.rms.difference),children:[e.rms.difference>0?"+":"",e.rms.difference]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Summary"}),(0,a.jsxs)("div",{className:"text-sm text-slate-300 space-y-1",children:[e.transients.difference>0&&(0,a.jsxs)("p",{children:["â€¢ Sandbox detected ",e.transients.difference," more transients"]}),e.transients.difference<0&&(0,a.jsxs)("p",{children:["â€¢ Cached analysis has ",Math.abs(e.transients.difference)," more transients"]}),e.chroma.difference>0&&(0,a.jsxs)("p",{children:["â€¢ Sandbox detected ",e.chroma.difference," more chroma events"]}),e.chroma.difference<0&&(0,a.jsxs)("p",{children:["â€¢ Cached analysis has ",Math.abs(e.chroma.difference)," more chroma events"]}),e.rms.difference>0&&(0,a.jsxs)("p",{children:["â€¢ Sandbox has ",e.rms.difference," more RMS samples"]}),e.rms.difference<0&&(0,a.jsxs)("p",{children:["â€¢ Cached analysis has ",Math.abs(e.rms.difference)," more RMS samples"]}),0===e.transients.difference&&0===e.chroma.difference&&0===e.rms.difference&&a.jsx("p",{children:"â€¢ No differences detected between analysis methods"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(i.z,{onClick:s,disabled:r,className:"bg-purple-600 hover:bg-purple-700 text-white",children:r?"Saving...":"Save to Cache"}),a.jsx(i.z,{onClick:t,disabled:c,variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:c?"Loading...":"Load from Cache"})]})]})]})}class R{static convertToCachedFormat(e,s,t="master"){let a=e.transients.map(e=>({time:e.time,type:"transient",intensity:e.intensity,frequency:e.frequency})),r=e.chroma.map(e=>({time:e.time,pitch:e.pitch,confidence:e.confidence,note:e.note})),l=e.rms.map(e=>({time:e.time,value:e.value})),i={transients:e.transients,chroma:e.chroma,rms:e.rms,features:e.transients.map(e=>({time:e.time,type:"transient",intensity:e.intensity})),pitch:r,volume:l,markers:a,timeData:e.transients.map(e=>e.time),frequencies:e.transients.map(e=>e.frequency),waveform:e.waveform,metadata:e.metadata};return{id:`sandbox_${s}_${Date.now()}`,fileMetadataId:s,stemType:t,analysisData:i,waveformData:{points:e.waveform,duration:e.metadata.duration,sampleRate:e.metadata.sampleRate,markers:a},metadata:{sampleRate:e.metadata.sampleRate,duration:e.metadata.duration,bufferSize:e.metadata.bufferSize,featuresExtracted:["transients","chroma","rms","waveform"],analysisDuration:0}}}static async saveToCache(e,s,t="master"){try{let a=this.convertToCachedFormat(e,s,t);return console.log("Sandbox analysis cached format:",a),!0}catch(e){return console.error("Failed to save sandbox analysis to cache:",e),!1}}static async loadFromCache(e,s="master"){try{return console.log("Loading sandbox analysis from cache:",{fileId:e,stemType:s}),null}catch(e){return console.error("Failed to load sandbox analysis from cache:",e),null}}static convertFromCachedFormat(e){try{if(!e||!e.analysisData)return null;let s=e.analysisData;return{transients:s.transients||[],chroma:s.chroma||[],rms:s.rms||[],waveform:e.waveformData?.points||[],metadata:{sampleRate:e.metadata?.sampleRate||44100,duration:e.metadata?.duration||0,bufferSize:e.metadata?.bufferSize||1024,analysisParams:s.analysisParams||{}}}}catch(e){return console.error("Failed to convert cached analysis to sandbox format:",e),null}}static compareAnalysis(e,s){let t=e.transients.length,a=e.chroma.length,r=e.rms.length,l=s?.analysisData?.transients?.length||0,i=s?.analysisData?.chroma?.length||0,n=s?.analysisData?.rms?.length||0;return{transients:{sandbox:t,cached:l,difference:t-l},chroma:{sandbox:a,cached:i,difference:a-i},rms:{sandbox:r,cached:n,difference:r-n}}}}var M=t(7697),z=t(996),D=t(4275),Z=t(74);function F(){let[e,s]=(0,r.useState)({health:"pending",sandboxTest:"pending",sandboxAuth:"pending"}),t=M.S.health.check.useQuery(void 0,{retry:!1,onSuccess:()=>{s(e=>({...e,health:"success"}))},onError:()=>{s(e=>({...e,health:"error"}))}}),c=M.S.audioAnalysisSandbox.test.useQuery(void 0,{retry:!1,onSuccess:()=>{s(e=>({...e,sandboxTest:"success"}))},onError:()=>{s(e=>({...e,sandboxTest:"error"}))}}),d=M.S.audioAnalysisSandbox.getSandboxAnalyses.useQuery({limit:1},{retry:!1,onSuccess:()=>{s(e=>({...e,sandboxAuth:"success"}))},onError:()=>{s(e=>({...e,sandboxAuth:"error"}))}}),o=e=>{switch(e){case"pending":return a.jsx(z.Z,{className:"w-4 h-4 animate-spin text-yellow-400"});case"success":return a.jsx(D.Z,{className:"w-4 h-4 text-green-400"});case"error":return a.jsx(Z.Z,{className:"w-4 h-4 text-red-400"})}},h=e=>{switch(e){case"pending":return"bg-yellow-600/20 text-yellow-400 border-yellow-600";case"success":return"bg-green-600/20 text-green-400 border-green-600";case"error":return"bg-red-600/20 text-red-400 border-red-600"}},x=e=>{switch(e){case"pending":return"Testing...";case"success":return"Connected";case"error":return"Failed"}};return(0,a.jsxs)(l.Zb,{className:"bg-slate-800/50 border-slate-700",children:[a.jsx(l.Ol,{children:a.jsx(l.ll,{className:"text-white flex items-center gap-2",children:"API Connection Test"})}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[o(e.health),a.jsx("span",{className:"text-slate-300",children:"Health Check"})]}),a.jsx(n.C,{variant:"outline",className:h(e.health),children:x(e.health)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[o(e.sandboxTest),a.jsx("span",{className:"text-slate-300",children:"Sandbox Router"})]}),a.jsx(n.C,{variant:"outline",className:h(e.sandboxTest),children:x(e.sandboxTest)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[o(e.sandboxAuth),a.jsx("span",{className:"text-slate-300",children:"Sandbox Auth"})]}),a.jsx(n.C,{variant:"outline",className:h(e.sandboxAuth),children:x(e.sandboxAuth)})]})]}),"error"===e.health&&(0,a.jsxs)("div",{className:"p-3 bg-red-900/20 border border-red-600/50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-red-400",children:"API server is not responding. Please check:"}),(0,a.jsxs)("ul",{className:"text-xs text-red-300 mt-2 space-y-1",children:[a.jsx("li",{children:"â€¢ API server is running on the correct port"}),a.jsx("li",{children:"â€¢ NEXT_PUBLIC_API_URL is set correctly"}),a.jsx("li",{children:"â€¢ No firewall blocking the connection"})]})]}),"error"===e.sandboxTest&&"success"===e.health&&a.jsx("div",{className:"p-3 bg-red-900/20 border border-red-600/50 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-400",children:"Health check passed but sandbox router failed. Check if the router is properly registered."})}),"error"===e.sandboxAuth&&"success"===e.sandboxTest&&a.jsx("div",{className:"p-3 bg-yellow-900/20 border border-yellow-600/50 rounded-lg",children:a.jsx("p",{className:"text-sm text-yellow-400",children:"Sandbox router is working but authentication failed. Make sure you're logged in."})}),"success"===e.health&&"success"===e.sandboxTest&&"success"===e.sandboxAuth&&a.jsx("div",{className:"p-3 bg-green-900/20 border border-green-600/50 rounded-lg",children:a.jsx("p",{className:"text-sm text-green-400",children:"All API endpoints are working correctly! The sandbox is ready to use."})}),a.jsx(i.z,{onClick:()=>{s({health:"pending",sandboxTest:"pending",sandboxAuth:"pending"}),t.refetch(),c.refetch(),d.refetch()},variant:"outline",className:"w-full border-slate-600 text-slate-300 hover:bg-slate-700",children:"Retry Tests"})]})]})}var q=t(3520);let E=(0,d.Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);function _(){let e=M.S.auth.session.useQuery(),s=M.S.auth.me.useQuery(void 0,{retry:!1}),t=(e,s,t)=>e?a.jsx(z.Z,{className:"w-4 h-4 animate-spin text-yellow-400"}):s?a.jsx(Z.Z,{className:"w-4 h-4 text-red-400"}):t?a.jsx(D.Z,{className:"w-4 h-4 text-green-400"}):a.jsx(q.Z,{className:"w-4 h-4 text-slate-400"}),r=(e,s,t)=>e?"bg-yellow-600/20 text-yellow-400 border-yellow-600":s?"bg-red-600/20 text-red-400 border-red-600":t?"bg-green-600/20 text-green-400 border-green-600":"bg-slate-600/20 text-slate-400 border-slate-600",i=(e,s,t)=>e?"Checking...":s?"Not authenticated":t?"Authenticated":"Unknown";return(0,a.jsxs)(l.Zb,{className:"bg-slate-800/50 border-slate-700",children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"text-white flex items-center gap-2",children:[a.jsx(E,{className:"w-5 h-5"}),"Authentication Status"]})}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[t(e.isLoading,e.isError,e.isSuccess),a.jsx("span",{className:"text-slate-300",children:"Session Check"})]}),a.jsx(n.C,{variant:"outline",className:r(e.isLoading,e.isError,e.isSuccess),children:i(e.isLoading,e.isError,e.isSuccess)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[t(s.isLoading,s.isError,s.isSuccess),a.jsx("span",{className:"text-slate-300",children:"Protected Endpoint"})]}),a.jsx(n.C,{variant:"outline",className:r(s.isLoading,s.isError,s.isSuccess),children:i(s.isLoading,s.isError,s.isSuccess)})]})]}),e.data&&(0,a.jsxs)("div",{className:"p-3 bg-slate-700/50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Session Info"}),(0,a.jsxs)("div",{className:"text-xs text-slate-300 space-y-1",children:[(0,a.jsxs)("p",{children:["Authenticated: ",e.data.authenticated?"Yes":"No"]}),e.data.user&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["User ID: ",e.data.user.id]}),(0,a.jsxs)("p",{children:["Email: ",e.data.user.email]}),(0,a.jsxs)("p",{children:["Name: ",e.data.user.name]})]})]})]}),s.data&&(0,a.jsxs)("div",{className:"p-3 bg-green-900/20 border border-green-600/50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"User Details"}),(0,a.jsxs)("div",{className:"text-xs text-green-300 space-y-1",children:[(0,a.jsxs)("p",{children:["ID: ",s.data.user.id]}),(0,a.jsxs)("p",{children:["Email: ",s.data.user.email]}),(0,a.jsxs)("p",{children:["Name: ",s.data.user.name]})]})]}),e.isError&&a.jsx("div",{className:"p-3 bg-red-900/20 border border-red-600/50 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-400",children:"Session check failed. This might indicate a connection issue."})}),s.isError&&e.isSuccess&&(0,a.jsxs)("div",{className:"p-3 bg-yellow-900/20 border border-yellow-600/50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-yellow-400",children:"Session exists but protected endpoint failed. This suggests an authentication token issue."}),a.jsx("p",{className:"text-xs text-yellow-300 mt-2",children:"Try logging out and logging back in to refresh your authentication token."})]})]})]})}function W(){let[e,s]=(0,r.useState)(null),[t,d]=(0,r.useState)(null),[g,b]=(0,r.useState)(null),[j,N]=(0,r.useState)(null),[y,w]=(0,r.useState)(null),[C,k]=(0,r.useState)(!1),[A,T]=(0,r.useState)(!1),[M,z]=(0,r.useState)(0),[D,Z]=(0,r.useState)(0),[q,E]=(0,r.useState)(!1),[W,L]=(0,r.useState)(!1),[B,I]=(0,r.useState)({transientThreshold:.3,onsetThreshold:.2,chromaSmoothing:.8,rmsWindowSize:1024,pitchConfidence:.7,minNoteDuration:.1}),U=(0,r.useRef)(null),{toast:V}=(0,f.pm)(),O=(0,r.useCallback)(e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("audio/")){V({title:"Invalid file type",description:"Please select an audio file (MP3, WAV, etc.)",variant:"destructive"});return}if(t.size>52428800){V({title:"File too large",description:"Please select a file smaller than 50MB",variant:"destructive"});return}s(t),b(null),z(0),T(!1);let a=new FileReader;a.onload=async e=>{try{let s=e.target?.result,t=new(window.AudioContext||window.webkitAudioContext),a=await t.decodeAudioData(s);d(a),Z(a.duration)}catch(e){console.error("Error loading audio:",e),V({title:"Error loading audio",description:"Failed to decode audio file",variant:"destructive"})}},a.readAsArrayBuffer(t)},[V]),G=(0,r.useCallback)(async()=>{t&&(k(!0),b(null),V({title:"Starting analysis...",description:"Processing audio with new parameters"}))},[t,V]),H=(0,r.useCallback)(e=>{b(e),k(!1),j&&w(R.compareAnalysis(e,j)),V({title:"Analysis complete!",description:"Audio analysis finished successfully"})},[j,V]),Y=(0,r.useCallback)(async()=>{if(g&&e){E(!0);try{if(await R.saveToCache(g,"sandbox-file","master"))V({title:"Saved to cache!",description:"Analysis data has been saved to the backend cache"});else throw Error("Failed to save to cache")}catch(e){console.error("Save error:",e),V({title:"Save failed",description:"Failed to save analysis to cache",variant:"destructive"})}finally{E(!1)}}},[g,e,V]),Q=(0,r.useCallback)(async()=>{if(e){L(!0);try{let e=await R.loadFromCache("sandbox-file","master");e?(b(e),V({title:"Loaded from cache!",description:"Analysis data has been loaded from the backend cache"})):V({title:"No cached data",description:"No cached analysis found for this file",variant:"destructive"})}catch(e){console.error("Load error:",e),V({title:"Load failed",description:"Failed to load analysis from cache",variant:"destructive"})}finally{L(!1)}}},[e,V]),$=(0,r.useCallback)(()=>{U.current&&(A?(U.current.pause(),T(!1)):(U.current.play(),T(!0)))},[A]),X=(0,r.useCallback)(e=>{U.current&&(U.current.currentTime=e,z(e))},[]),J=(0,r.useCallback)(()=>{U.current&&z(U.current.currentTime)},[]),K=(0,r.useCallback)(()=>{T(!1),z(0)},[]);return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[a.jsx("h1",{className:"text-4xl font-bold text-white",children:"Audio Analysis Sandbox"}),a.jsx("p",{className:"text-xl text-slate-300",children:"Test transient detection, chroma analysis, and RMS processing"}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsxs)(n.C,{variant:"outline",className:"text-slate-300 border-slate-600",children:[a.jsx(c.Z,{className:"w-3 h-3 mr-1"}),"Transient Detection"]}),(0,a.jsxs)(n.C,{variant:"outline",className:"text-slate-300 border-slate-600",children:[a.jsx(o,{className:"w-3 h-3 mr-1"}),"Chroma Analysis"]}),(0,a.jsxs)(n.C,{variant:"outline",className:"text-slate-300 border-slate-600",children:[a.jsx(h,{className:"w-3 h-3 mr-1"}),"RMS Processing"]})]})]}),a.jsx(F,{}),a.jsx(_,{}),(0,a.jsxs)(l.Zb,{className:"bg-slate-800/50 border-slate-700",children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"text-white flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Audio File Upload"]})}),a.jsx(l.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("input",{type:"file",accept:"audio/*",onChange:O,className:"block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-600 file:text-white hover:file:bg-purple-700"}),e&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-700/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(c.Z,{className:"w-5 h-5 text-purple-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-slate-400",children:[(e.size/1024/1024).toFixed(2)," MB"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(i.z,{onClick:G,disabled:C||!t,className:"bg-purple-600 hover:bg-purple-700",children:C?"Analyzing...":"Analyze"}),a.jsx(i.z,{onClick:$,disabled:!t,variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:A?a.jsx(m.Z,{className:"w-4 h-4"}):a.jsx(u.Z,{className:"w-4 h-4"})})]})]}),e&&a.jsx("audio",{ref:U,src:URL.createObjectURL(e),onTimeUpdate:J,onEnded:K,className:"hidden"})]})})]}),t&&a.jsx(p,{audioBuffer:t,params:B,onAnalysisComplete:H}),t&&a.jsx(S,{params:B,onParamsChange:I}),g&&a.jsx(v,{analysisData:g,currentTime:M,duration:D,onSeek:X,isPlaying:A}),y&&a.jsx(P,{comparison:y,onSaveToCache:Y,onLoadFromCache:Q,isSaving:q,isLoading:W}),g&&(0,a.jsxs)(l.Zb,{className:"bg-slate-800/50 border-slate-700",children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"text-white flex items-center gap-2",children:[a.jsx(o,{className:"w-5 h-5"}),"Analysis Results"]})}),a.jsx(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-slate-700/50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Transients"}),a.jsx("p",{className:"text-2xl font-bold text-red-400",children:g.transients?.length||0}),a.jsx("p",{className:"text-sm text-slate-400",children:"Detected onsets"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-slate-700/50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Chroma Notes"}),a.jsx("p",{className:"text-2xl font-bold text-blue-400",children:new Set(g.chroma?.map(e=>e.note)||[]).size}),a.jsx("p",{className:"text-sm text-slate-400",children:"Unique notes"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-slate-700/50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"RMS Avg"}),a.jsx("p",{className:"text-2xl font-bold text-green-400",children:g.rms?.length?(g.rms.reduce((e,s)=>e+s.value,0)/g.rms.length).toFixed(3):"0.000"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Average amplitude"})]})]})})]})]})})}},883:(e,s,t)=>{"use strict";t.d(s,{C:()=>n});var a=t(3972);t(3250);var r=t(7439),l=t(5705);let i=(0,r.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...t}){return a.jsx("div",{className:(0,l.cn)(i({variant:s}),e),...t})}},8868:(e,s,t)=>{"use strict";t.d(s,{z:()=>d});var a=t(3972),r=t(3250),l=t(2226),i=t(7439),n=t(5705);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,...i},d)=>{let o=r?l.g7:"button";return a.jsx(o,{className:(0,n.cn)(c({variant:s,size:t,className:e})),ref:d,...i})});d.displayName="Button"},4482:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>n,SZ:()=>d,Zb:()=>i,aY:()=>o,eW:()=>h,ll:()=>c});var a=t(3972),r=t(3250),l=t(5705);let i=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...s}));i.displayName="Card";let n=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let h=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s}));h.displayName="CardFooter"},2204:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var a=t(3972),r=t(3250),l=t(6418),i=t(7439),n=t(5705);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},t)=>a.jsx(l.f,{ref:t,className:(0,n.cn)(c(),e),...s}));d.displayName=l.f.displayName},4400:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(3972),r=t(3250),l=t(5256),i=t(5705);let n=r.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...r},n)=>a.jsx(l.f,{ref:n,decorative:t,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));n.displayName=l.f.displayName},8673:(e,s,t)=>{"use strict";t.d(s,{i:()=>n});var a=t(3972),r=t(3250),l=t(4911),i=t(5705);let n=r.forwardRef(({className:e,...s},t)=>(0,a.jsxs)(l.fC,{ref:t,className:(0,i.cn)("relative flex w-full touch-none select-none items-center",e),...s,children:[a.jsx(l.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-white/20",children:a.jsx(l.e6,{className:"absolute h-full bg-white/80"})}),a.jsx(l.bU,{className:"block h-4 w-4 rounded-full border-2 border-white/80 bg-white/50 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));n.displayName=l.fC.displayName},1730:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(4785).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},5652:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(7003).createProxy)(String.raw`/Users/jasperhall/Desktop/Phonoglyph/apps/web/src/app/audio-analysis-sandbox/page.tsx#default`)},247:(e,s,t)=>{"use strict";t.d(s,{gm:()=>l});var a=t(3250);t(3972);var r=a.createContext(void 0);function l(e){let s=a.useContext(r);return e||s||"ltr"}},6418:(e,s,t)=>{"use strict";t.d(s,{f:()=>n});var a=t(3250),r=t(3168),l=t(3972),i=a.forwardRef((e,s)=>(0,l.jsx)(r.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var n=i},5256:(e,s,t)=>{"use strict";t.d(s,{f:()=>d});var a=t(3250),r=t(3168),l=t(3972),i="horizontal",n=["horizontal","vertical"],c=a.forwardRef((e,s)=>{let{decorative:t,orientation:a=i,...c}=e,d=n.includes(a)?a:i;return(0,l.jsx)(r.WV.div,{"data-orientation":d,...t?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...c,ref:s})});c.displayName="Separator";var d=c},1030:(e,s,t)=>{"use strict";t.d(s,{t:()=>l});var a=t(3250),r=t(4884);function l(e){let[s,t]=a.useState(void 0);return(0,r.b)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let s=new ResizeObserver(s=>{let a,r;if(!Array.isArray(s)||!s.length)return;let l=s[0];if("borderBoxSize"in l){let e=l.borderBoxSize,s=Array.isArray(e)?e[0]:e;a=s.inlineSize,r=s.blockSize}else a=e.offsetWidth,r=e.offsetHeight;t({width:a,height:r})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}t(void 0)},[e]),s}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[369,39,418,979],()=>t(360));module.exports=a})();