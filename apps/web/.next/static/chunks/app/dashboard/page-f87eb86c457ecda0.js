(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3504:function(e,t,s){Promise.resolve().then(s.bind(s,9056))},9056:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var n=s(1279),a=s(12),l=s(8148),r=s(2008),i=s(3133),o=s(4964),c=s(7953),d=s(7437),x=s(759),u=s(8030),m=s(1909),h=s(5487),p=s(8092),f=s(6564),j=s(4443),b=s(6998);let g=a.forwardRef((e,t)=>{var s,l;let{user:r}=e,[g,v]=a.useState(!1),[N,y]=a.useState(""),{toast:w}=(0,h.pm)(),D=(0,f.useRouter)(),[C,S]=a.useState(null),[E,k]=a.useState(!1),{data:P=[],isLoading:T,refetch:R}=m.S.project.list.useQuery(),_=!!(null==N?void 0:N.trim()),{data:A,isLoading:O}=m.S.project.search.useQuery({query:(null==N?void 0:N.trim())||"",sort_by:"updated_at",sort_order:"desc"},{enabled:_}),z=_?A||[]:P;console.log("\uD83D\uDD0D ProjectDashboard State:",{searchQuery:'"'.concat(N,'"'),hasSearchCriteria:_,isLoading:T,isSearching:O,projectsLength:null==P?void 0:P.length,searchResultsLength:null==A?void 0:A.length,displayProjectsLength:null==z?void 0:z.length});let L=e=>{D.push("/creative-visualizer?projectId=".concat(e))},H=()=>{v(!0)},F=m.S.project.delete.useMutation({onSuccess:()=>{w({title:"Project deleted",description:"The project was deleted."}),S(null),R()},onError:e=>{w({title:"Delete failed",description:e.message,variant:"destructive"}),S(null)},onSettled:()=>k(!1)}),I=e=>{k(!0),F.mutate({id:e})};return(0,n.jsxs)("div",{ref:t,className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100",children:[(0,n.jsxs)("div",{className:"container mx-auto px-4 lg:px-8 py-8",children:[(0,n.jsx)(i.E.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl lg:text-4xl font-display font-bold text-stone-800",children:"PROJECTS"}),(0,n.jsxs)("p",{className:"text-lg font-mono text-stone-600",children:["Welcome back, ",(null==r?void 0:null===(s=r.user_metadata)||void 0===s?void 0:s.name)||(null==r?void 0:r.email)]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(d.E,{status:"live",children:"SYSTEM ONLINE"}),(0,n.jsx)(i.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,n.jsx)(c.n,{variant:"primary",size:"lg",onClick:H,children:"+ Create New Project"})})]})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,n.jsxs)(i.E.aside,{className:"lg:col-span-1 space-y-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[(0,n.jsxs)(o.W,{variant:"panel",className:"p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-display font-bold text-stone-700 mb-4",children:"SEARCH & FILTER"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-mono text-stone-600 mb-2",children:"SEARCH PROJECTS"}),(0,n.jsx)("input",{type:"text",placeholder:"Search by name...",value:N,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-stone-300 rounded-md text-stone-700 placeholder:text-stone-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),N&&(0,n.jsx)(c.n,{variant:"secondary",size:"sm",className:"w-full",onClick:()=>{y("")},children:"Clear Filters"})]}),(0,n.jsxs)(o.W,{variant:"panel",className:"p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-display font-bold text-stone-700 mb-4",children:"STATS"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-mono text-stone-600",children:"TOTAL PROJECTS"}),(0,n.jsx)("span",{className:"text-sm font-mono font-bold text-stone-700",children:P.length})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-mono text-stone-600",children:"ACTIVE"}),(0,n.jsx)("span",{className:"text-sm font-mono font-bold text-green-600",children:P.length})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-mono text-stone-600",children:"LAST UPDATED"}),(0,n.jsx)("span",{className:"text-xs font-mono text-stone-500",children:(null===(l=P[0])||void 0===l?void 0:l.updated_at)?new Date(P[0].updated_at).toLocaleDateString():"N/A"})]})]})]})]}),(0,n.jsx)(i.E.main,{className:"lg:col-span-3",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:(0,n.jsx)(o.W,{className:"p-8 min-h-[600px]",children:T||_&&O?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,n.jsx)(x.T,{size:"lg",className:"mb-4"}),(0,n.jsx)("p",{className:"text-lg font-mono text-stone-600",children:_&&O?"SEARCHING PROJECTS...":"LOADING PROJECTS..."})]}):z.length>0?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-display font-bold text-stone-700",children:N?"Search Results":"Your Projects"}),(0,n.jsxs)(d.E,{status:"completed",children:[z.length," PROJECT",1!==z.length?"S":""]})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:z.map((e,t)=>(0,n.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},whileHover:{y:-4},className:"cursor-pointer",onClick:()=>L(e.id),children:(0,n.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 relative group",children:[(0,n.jsx)("div",{className:"w-full h-32 bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg mb-4 flex items-center justify-center",children:e.thumbnail_url?(0,n.jsx)("img",{src:e.thumbnail_url,alt:e.name,className:"w-full h-full object-cover rounded-lg"}):(0,n.jsx)("div",{className:"text-4xl",children:"\uD83C\uDFB5"})}),(0,n.jsxs)("div",{className:"space-y-2 pb-8",children:[(0,n.jsx)("h3",{className:"font-display font-bold text-stone-800 truncate",children:e.name}),e.description&&(0,n.jsx)("p",{className:"text-sm text-stone-600 line-clamp-2",children:e.description}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-xs font-mono text-stone-500 mb-1",children:[(0,n.jsx)("span",{children:new Date(e.updated_at).toLocaleDateString()}),(0,n.jsxs)("span",{children:[e.file_count||0," files"]})]}),(0,n.jsx)("span",{className:(0,p.cn)("px-2 py-1 rounded text-xs font-mono uppercase","private"===e.privacy_setting&&"bg-red-100 text-red-700","unlisted"===e.privacy_setting&&"bg-yellow-100 text-yellow-700","public"===e.privacy_setting&&"bg-green-100 text-green-700"),children:e.privacy_setting})]}),(0,n.jsx)("button",{onClick:t=>{t.stopPropagation(),S(e.id)},className:"absolute bottom-4 right-4 bg-white border border-stone-200 rounded-full p-2 shadow-md text-red-500 hover:text-white hover:bg-red-500 transition-opacity opacity-0 group-hover:opacity-100 focus:opacity-100 focus:outline-none",title:"Delete project",children:(0,n.jsx)(j.Z,{size:18})})]})},e.id))})]}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,n.jsx)("div",{className:"text-6xl mb-6",children:"\uD83C\uDFBC"}),(0,n.jsx)("h2",{className:"text-2xl font-display font-bold text-stone-700 mb-4",children:N?"No Matching Projects":"No Projects Yet"}),(0,n.jsx)("p",{className:"text-lg font-mono text-stone-600 mb-6 max-w-md",children:N?"Try adjusting your search criteria or create a new project.":"Create your first music visualization project to get started."}),(0,n.jsx)(i.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,n.jsx)(c.n,{variant:"primary",size:"lg",onClick:H,children:"Create First Project"})})]})})})]})]}),(0,n.jsx)(u.p,{isOpen:g,onClose:()=>v(!1)}),(0,n.jsx)(b.c,{isOpen:!!C,onClose:()=>S(null),onConfirm:()=>C&&I(C),title:"Delete Project?",description:"Are you sure you want to delete this project and all its files? This action cannot be undone.",confirmText:E?"Deleting...":"Delete",confirmVariant:"danger"})]})});function v(){let[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)(!0),[o,c]=(0,a.useState)([]);return((0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await l.O.auth.getSession();t((null==e?void 0:e.user)||null),i(!1)})();let{data:{subscription:e}}=l.O.auth.onAuthStateChange(async(e,s)=>{t((null==s?void 0:s.user)||null)});return()=>e.unsubscribe()},[]),s)?(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(x.T,{size:"lg",className:"mb-4"}),(0,n.jsx)("p",{className:"text-stone-600 font-mono",children:"LOADING DASHBOARD..."})]})}):e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.W,{user:e,currentPath:"/dashboard",recentProjects:o,showBreadcrumbs:!0}),(0,n.jsx)(g,{user:e})]}):(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-display font-bold text-stone-700 mb-4",children:"ACCESS DENIED"}),(0,n.jsx)("p",{className:"text-stone-600 font-mono mb-6",children:"Please sign in to access the dashboard"}),(0,n.jsx)("a",{href:"/login",className:"inline-block bg-stone-600 text-white px-6 py-3 rounded-md font-sans font-bold uppercase tracking-wider text-sm transition-colors hover:bg-stone-700",children:"Sign In"})]})})}g.displayName="ProjectDashboard"},2008:function(e,t,s){"use strict";s.d(t,{W:function(){return h}});var n=s(1279),a=s(12),l=s(1348),r=s(3133),i=s(8092),o=s(7953),c=s(8673),d=s(6564);function x(e){let{items:t=[],className:s}=e,r=(0,d.useRouter)(),o=function(e){let t=e.split("/").filter(Boolean),s=[{label:"Home",href:"/",icon:"\uD83C\uDFE0"}],n="";for(let e=0;e<t.length;e++){n+="/".concat(t[e]);let a=t[e],l=a,r="";switch(a){case"dashboard":l="Dashboard",r="\uD83D\uDCCA";break;case"projects":if(e===t.length-1)l="Projects",r="\uD83D\uDCC1";else{let s=t[e+1];l="Project ".concat(s.slice(0,8)),r="\uD83C\uDFB5",n+="/".concat(s),e++}break;case"settings":l="Settings",r="⚙️";break;case"shared":l="Shared Project",r="\uD83D\uDD17";break;case"files":l="Files",r="\uD83D\uDCC4";break;case"upload-demo":l="Upload Demo",r="\uD83D\uDCE4";break;case"creative-visualizer":l="Visualizer",r="\uD83C\uDFA8";break;case"profile":l="Profile",r="\uD83D\uDC64";break;default:l=a.charAt(0).toUpperCase()+a.slice(1)}s.push({label:l,href:n,icon:r})}return s}((0,d.usePathname)()),c=t.length>0?t:o;return((0,a.useEffect)(()=>{let e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"b":case"B":e.preventDefault(),r.push("/dashboard");break;case"h":case"H":e.preventDefault(),r.push("/")}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r]),c.length<=1)?null:(0,n.jsxs)("nav",{className:(0,i.cn)("flex items-center space-x-2 text-sm font-mono text-stone-600",s),"aria-label":"Breadcrumb",children:[c.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center",children:[t>0&&(0,n.jsx)("span",{className:"mx-2 text-stone-400",children:"/"}),t===c.length-1?(0,n.jsxs)("span",{className:"flex items-center text-stone-800 font-medium",children:[e.icon&&(0,n.jsx)("span",{className:"mr-1",children:e.icon}),e.label]}):(0,n.jsxs)(l.default,{href:e.href,className:"flex items-center text-stone-600 hover:text-stone-800 transition-colors",children:[e.icon&&(0,n.jsx)("span",{className:"mr-1",children:e.icon}),e.label]})]},e.href)),(0,n.jsxs)("div",{className:"ml-6 text-xs text-stone-400 hidden lg:block",children:[(0,n.jsx)("span",{className:"mr-3",children:"⌘B Dashboard"}),(0,n.jsx)("span",{children:"⌘H Home"})]})]})}function u(e){let{currentProject:t,recentProjects:s=[],onProjectSwitch:a,...l}=e,r=(0,d.useRouter)(),i=e=>{a?a(e):r.push("/projects/".concat(e))};return(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(x,{...l}),t&&s.length>0&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"text-xs font-mono text-stone-500",children:"Quick Switch:"}),(0,n.jsxs)("select",{value:t.id,onChange:e=>i(e.target.value),className:"text-xs border border-stone-300 rounded px-2 py-1 bg-white text-stone-700 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:t.id,children:t.name}),s.filter(e=>e.id!==t.id).slice(0,5).map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}var m=s(5003);let h=a.forwardRef((e,t)=>{let{user:s,currentPath:a,currentProject:d,recentProjects:x=[],showBreadcrumbs:h=!0}=e;return(0,n.jsx)(r.E.nav,{ref:t,className:"sticky top-0 z-40 w-full glass-strong border-b border-white/20",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,ease:"easeOut"},children:(0,n.jsxs)("div",{className:"container mx-auto px-4 lg:px-8",children:[(0,n.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,n.jsx)(l.default,{href:"/",className:"flex items-center space-x-2",children:(0,n.jsx)(r.E.div,{className:"flex items-center",whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:10},children:(0,n.jsx)(m.S,{size:"md",className:"text-stone-700"})})}),(0,n.jsx)("div",{className:"hidden md:flex items-center space-x-8",children:[{href:"/",label:"Home"},{href:"/creative-visualizer",label:"Visualizer"},{href:"/files",label:"Files"},{href:"/dashboard",label:"Dashboard"}].map(e=>(0,n.jsx)(l.default,{href:e.href,className:(0,i.cn)("text-sm font-sans font-medium transition-colors duration-200",a===e.href?"text-stone-700 border-b-2 border-stone-600":"text-stone-600 hover:text-stone-700"),children:e.label},e.href))}),(0,n.jsx)("div",{className:"flex items-center space-x-4",children:s?(0,n.jsx)(c.D,{user:s}):(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(l.default,{href:"/login",children:(0,n.jsx)(o.n,{variant:"secondary",size:"sm",children:"Sign In"})}),(0,n.jsx)(l.default,{href:"/signup",children:(0,n.jsx)(o.n,{variant:"primary",size:"sm",children:"Sign Up"})})]})})]}),h&&(0,n.jsx)("div",{className:"border-t border-white/10 px-0 py-2",children:(0,n.jsx)(u,{currentProject:d,recentProjects:x,className:"text-xs"})})]})})});h.displayName="Navigation"},4964:function(e,t,s){"use strict";s.d(t,{W:function(){return r}});var n=s(1279),a=s(12),l=s(8092);let r=a.forwardRef((e,t)=>{let{className:s,variant:a="default",children:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)({default:"glass",strong:"glass-strong",modal:"glass-modal",panel:"bg-stone-300/90 backdrop-blur-md border border-stone-400/30 rounded-xl shadow-glass"}[a],s),...i,children:r})});r.displayName="GlassCard"},7437:function(e,t,s){"use strict";s.d(t,{E:function(){return r}});var n=s(1279),a=s(12),l=s(8092);let r=a.forwardRef((e,t)=>{let{status:s,children:a,className:r}=e;return(0,n.jsxs)("div",{ref:t,className:(0,l.cn)({live:"status-live",processing:"bg-amber-muted/80 text-amber-800 px-3 py-1 rounded-xl font-sans font-bold uppercase tracking-wider text-xs flex items-center gap-2",completed:"bg-sage-accent/80 text-white px-3 py-1 rounded-xl font-sans font-bold uppercase tracking-wider text-xs flex items-center gap-2",error:"bg-terracotta-accent/80 text-white px-3 py-1 rounded-xl font-sans font-bold uppercase tracking-wider text-xs flex items-center gap-2",warning:"bg-amber-muted/80 text-amber-800 px-3 py-1 rounded-xl font-sans font-bold uppercase tracking-wider text-xs flex items-center gap-2"}[s],r),children:["live"===s&&(0,n.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"processing"===s&&(0,n.jsx)("div",{className:"w-2 h-2 bg-amber-800 rounded-full animate-pulse"}),"completed"===s&&(0,n.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),"error"===s&&(0,n.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),"warning"===s&&(0,n.jsx)("div",{className:"w-2 h-2 bg-amber-800 rounded-full"}),a]})});r.displayName="StatusIndicator"}},function(e){e.O(0,[311,336,947,293,422,69,32,541,655,673,218,915,264,744],function(){return e(e.s=3504)}),_N_E=e.O()}]);